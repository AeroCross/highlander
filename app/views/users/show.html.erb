<%- provide :head do -%>
   <%= stylesheet_link_tag :user -%>
<%- end -%>

<section class="user-details">

  <p class="avatar"><%= image_tag @user.avatar_url 150 %></p>

  <div class="info-block">

  <% if can? :edit, @user %>
    <%= link_to 'edit', edit_user_path(current_user) %></li>
  <% end %>

  <h2 class="name"><%= link_to @user.name, @user %></h2>
  <h3 class="twitter-handle"><%= @user.twitter_handle %></h3>

  <p class="bio"><%= @user.bio %></p>

  <ul class="stats">
    <li class="total-score"><span><%= @user.total_score %></span> Total Score</li>
    <li class="total-badges"><span><%= @user.achievements.count %></span> Badges</li>
  </ul>

  </div>

</section>

<section class="badges">

  <h2>Badges</h2>

  <ul>
    <%- @user.achievements.each do |achievement| %>
      <li><%= render partial: 'shared/badge', locals: { achievement: achievement } %></li>
    <%- end %>
  </ul>

</section>

<section class="summary">

  <h2>Summary</h2>

  <ul>
    <%- @user.metric_totals.each do |metric_total| %>
      <li class="<%= metric_total.description %>">
        <%
          # TODO: We can provide point line items too using metric_total.event_total_value
          # e.g. 20 points for 2 twitter mentions
        %>
         <span class="value"><strong><%= metric_total.event_total_count %></strong></span>
         <span class="description"><%= metric_total.description.titleize.pluralize(metric_total.event_total_count) %></span>
      </li>
    <%- end %>
  </ul>

</section>
